"use strict";(self["webpackChunkuchim_vue"]=self["webpackChunkuchim_vue"]||[]).push([[170],{8170:function(s,e,r){r.r(e),r.d(e,{default:function(){return d}});var t=r(3396),o=r(9242),a=r(7139);function n(s,e,r,n,i,h){return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.wy)((0,t._)("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=s=>i.email=s),placeholder:"email"},null,512),[[o.nr,i.email]]),(0,t.wy)((0,t._)("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=s=>i.password1=s),placeholder:"password"},null,512),[[o.nr,i.password1]]),(0,t.wy)((0,t._)("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=s=>i.password2=s),placeholder:"repeat password"},null,512),[[o.nr,i.password2]]),(0,t._)("button",{onClick:e[3]||(e[3]=s=>h.register())},"Зарегистрироваться"),(0,t.Uk)(" "+(0,a.zw)(i.errors),1)])}r(7658);var i=r(4161),h={name:"SignUp",data(){return{email:"",password1:"",password2:"",errors:[],data:""}},methods:{async register(){if(this.errors=[],""===this.email&&this.errors.push("The username is missing"),""===this.password1&&this.errors.push("The password is too short"),this.password1!==this.password2&&this.errors.push("The passwords doesn't match"),!this.errors.length){const s={email:this.email,password:this.password1};await i.Z.post("auth/users/",s).then((s=>{this.data=s.data,i.Z.defaults.headers.common["Authorization"]="",localStorage.removeItem("token");const e={email:this.email,password:this.password1};i.Z.post("auth/token/login/",e).then((s=>{const e=s.data.auth_token;this.$store.commit("setToken",e),i.Z.defaults.headers.common["Authorization"]="Token "+e,localStorage.setItem("token",e),this.$router.push("/")})).catch((s=>{if(s.response)for(const e in s.response.data)this.errors.push(`${e}: ${s.response.data[e]}`);else this.errors.push("Something went wrong. Please try again"),console.log(JSON.stringify(s))}))})).catch((s=>{if(s.response){for(const e in s.response.data)this.errors.push(`${e}: ${s.response.data[e]}`);console.log(JSON.stringify(s.response.data))}else s.message&&(this.errors.push("Something went wrong. Please try again"),console.log(JSON.stringify(s)))}))}}}},p=r(89);const l=(0,p.Z)(h,[["render",n]]);var d=l}}]);
//# sourceMappingURL=170.77eba764.js.map